<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2017.2 (Released Jan 23, 2017) -->
<HTML>
<HEAD>
<TITLE>cachedDBM</TITLE>
<META NAME="description" CONTENT="cachedDBM">
<META NAME="keywords" CONTENT="ecolab">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2017.2">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="ecolab.css">

<LINK REL="next" HREF="node142.html">
<LINK REL="previous" HREF="node135.html">
<LINK REL="up" HREF="ecolab.html">
<LINK REL="next" HREF="node139.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html2308"
  HREF="node139.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html2302"
  HREF="ecolab.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html2296"
  HREF="node137.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html2304"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html2306"
  HREF="node143.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html2309"
  HREF="node139.html">Synopsis</A>
<B> Up:</B> <A NAME="tex2html2303"
  HREF="ecolab.html">Eco Lab Documentation</A>
<B> Previous:</B> <A NAME="tex2html2297"
  HREF="node137.html">eco_strstream</A>
 &nbsp; <B>  <A NAME="tex2html2305"
  HREF="node1.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html2307"
  HREF="node143.html">Index</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION000230000000000000000"></A><A NAME="cachedDBM"></A>
<BR>
cachedDBM
</H1>

<P>
<TT>cachedDBM</TT> implements a notion of persistent objects. First and
foremostly, it has the syntax of std::map, ie it is a template map
object, with a key and value type pair. However, by calling the
<code>init()</code> method, you can attach a database file, so that values
saved in the cachedDBM are stored on disk, to be accessible at a later
time.

<P>
The iterator range <code>begin()</code> to <code>end()</code> refers to everything
stored in the database. An alternative interface that iterates over
the database keys is provided by <code>keys.begin()</code> and
<code>keys.end()</code> The database is committed when <code>begin()</code> is
called, unless the database was opened readonly. In this latter case,
there are potentially items stored in the map which will not be
iterated over. The alternative iteration
methods <code>firstkey()</code>, <code>nextkey()</code> and <code>eof()</code> is an
older interface for iterating over <code>keys.begin()</code> to
<code>keys.end()</code>.  In this instance, the cachedDBM is not committed
when <code>firstkey()</code> is called.

<P>
Elements stored in the cachedDBM are not actually written to disk until
<code>commit()</code> is called (or the cachedDBM object is
destroyed). 

<P>
Entries in the database can be removed via <code>del()</code>. However, if
an item with the same key is in the cache, it will need to be removed via
<code>erase()</code> as well, otherwise it will be reinserted in the
database at commit time.

<P>
Only a very simple caching algorithm is employed, but it seems
sufficient for many purposes. If the member <code>max_elem</code> is set,
then this acts as an upper limit to the number of items stored in
memory. If you request a new item to be loaded via the [] operator,
and it will cause the number of items to be exceeded, the cachedDBM
object is committed. At least the oldest quarter of the cache is cleared,
and up to half of the cache. So if <code>max_elem</code>=100, then one is
guaranteed that the previous 50 accessed objects will always be in
memory, so can be assigned to a reference.

<P>
Classdesc serialisation (XDR serialisation) is used store both keys
and value data. The database file are therefore machine independent.
As a special exception to serialisation rules, <code>char*</code> can be
used as key and data types.

<P>
<BR><HR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html2310"
  HREF="node139.html">Synopsis</A>
<LI><A NAME="tex2html2311"
  HREF="node140.html">TCL access</A>
<LI><A NAME="tex2html2312"
  HREF="node141.html">Types of database</A>
</UL>
<!--End of Table of Child-Links-->

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html2308"
  HREF="node139.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html2302"
  HREF="ecolab.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html2296"
  HREF="node137.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html2304"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html2306"
  HREF="node143.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html2309"
  HREF="node139.html">Synopsis</A>
<B> Up:</B> <A NAME="tex2html2303"
  HREF="ecolab.html">Eco Lab Documentation</A>
<B> Previous:</B> <A NAME="tex2html2297"
  HREF="node137.html">eco_strstream</A>
 &nbsp; <B>  <A NAME="tex2html2305"
  HREF="node1.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html2307"
  HREF="node143.html">Index</A></B> </DIV>
<!--End of Navigation Panel-->

</BODY>
</HTML>
